# ReactJS de Básico a Avanzado

![logo](https://transparencia.banxico.org.mx/dyn/multimedia/bannerT.jpg)

> Alan Badillo Salas (badillosalas@outlook.com)

```markdown
Módulo 6: State en componentes

* Estado en componentes de clase y funcionales
* Manejo de eventos y actualización del estado
```

## M601. Estado en componentes de clase y funcionales

### Estado del componente clase

El estado es retenido en `this.state` e inicializado en el constructor.

Cada que se desea un cambio sobre el estado se utilizará `this.setState(<nuevo estado>)` con los cambios paraciales que se desean.

**IMPORTANTE:** Se recomienda mantener estados planos sin claves complejas para un mejor control del estado.

```jsx
import React from "react"

class App extends React.Component {

    constructor(props) {

        super(props)

        this.state = {
            a: 123,
            b: false
        }

        if (props.x) {
            this.state.a = props.x
        }

        if (props.y) {
            this.state.b = true
        }

    }

    render() {

        return (
            <div>
                <span>{this.state.a} - {this.state.b ? "SI" : "NO"}</span>
                <button
                    onClick={() => {
                        // APLICAMOS UN CAMBIO PARCIAL SOBRE `a`
                        this.setState({
                            a: this.state.a + 1
                        })
                    }}
                >
                    aumentar
                </button>
            </div>
        )

    }

}
```

**NOTAS**

* Siempre se debe buscar un estado consistente.
* El render siempre debe garantizar datos simples que puedan ser pintados

### Estado del componente funcional

En el componente funcional, debemos usar un `hook` de tipo `useState` por cada estado o conjunto de estados deseado.

```jsx
import { useState } from "react"

function App(props) {

    const [a, setA] = useState(props.x || 123)
    const [b, setB] = useState(props.y ? true: false)

    return (
        <div>
            <span>{a} - {b ? "SI" : "NO"}</span>
            <button
                onClick={() => {
                    // APLICAMOS UN CAMBIO PARCIAL SOBRE `a`
                    setA(a + 1)
                }}
            >
                aumentar
            </button>
        </div>
    )

}
```

**NOTAS**

* En los componentes funcionales, el consumo del estado es más directo
* Los cambios parciales sobre el estado se dará a través de su ajustador

## M602. Manejo de eventos y actualización del estado

> Usando `this.setState(<nuevo estado>)` en componentes clase

```jsx
this.setState(state => {
    return {
        x: state.x + 1
    }
})
```

El ajustador del estado puede recuperar el estado previo para mejorarlo, evitando acceder al estado general `this.state`, esta alternativa hace que garanticemos el manejo de la parcialidad.

> Usando `setX(<nuevo valor>)` en componentes funcionales

```jsx
setX(x => {
    return {
        x: x + 1
    }
})
```

El ajustador singular en componentes funcionales es similar, aunque lo más directo es pasar el nuevo valor `setX(x + 1)`. 

